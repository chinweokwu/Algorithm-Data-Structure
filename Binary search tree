class Node
  attr_reader :data
  attr_accessor :left, :right

  def initialize(data)
    @data = data
  end
end

class BST
    def initialize()
    @root = nil
  end
 # insert a node in BST 

  def insert(node, root = @root)
  #  puts("node ", node.data)
  #  puts("current root ", root.data) unless root.nil?
    if @root.nil?
      @root=node
  #    puts('first root', @root.data)
    else
  #    puts("@root not nil", root.data, node.data)
      if node.data < root.data
  #      puts("visit left", root.left.nil? )
        if !root.left.nil?
         insert(node, root.left)
        else
  #       puts("put on left leaf", node.data)
         root.left=node
        end
       else
  #      puts("has right son?", !root.right.nil?)
        if !root.right.nil?
  #        puts("visit rigth", root.right.nil? )
         insert(node, root.right)
        else
  #       puts("put on right leaf", node.data)
         root.right=node
        end
      end
    end

  end

  def pre_order(node = @root, str = '')
    str += node.data.to_s + ' '
    str += pre_order(node.left) if node.left
    str += pre_order(node.right) if node.right
    return str
  end
end


def binary_search_tree(array)
  tree = BST.new
  array.each { |e| tree.insert(Node.new(e)) }
  tree.pre_order
end

puts binary_search_tree([8, 3, 10, 1, 6, 14, 4, 7, 13])
# => "8 3 1 6 4 7 10 14 13"
